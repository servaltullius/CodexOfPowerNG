# Codex of Power NG v1.0.6-rc.5 (2026-02-17, Pre-release)

## 요약
이번 프리릴리즈는 LOTD/TCC 연동 등록 게이트를 fail-closed 방식으로 강화하고, 게이트 불가 상태를 UI에서 즉시 확인할 수 있도록 경고 표시를 추가하는 데 집중했습니다.  
설정이 켜진 상태에서 TCC 리스트를 찾지 못하면 등록을 안전하게 차단합니다.

## 주요 변경점
- `registration.requireTccDisplayed` 설정 추가 및 저장/불러오기 연동
- TCC FormList(`dbmMaster`, `dbmDisp`) 미가용 시 등록 차단(fail-closed) 적용
- Quick Register 목록에서 LOTD 게이트 비허용 항목 제외
- 상단 상태 bar에 `LOTD Gate` pill + 1회 경고 toast 추가
- `Settings` 탭 상단에 LOTD 게이트 경고 배너 추가
- C++ 게이트 판정 매트릭스 테스트 + UI 경고 렌더링 테스트 추가

## 사용자 영향
- 기본값(`requireTccDisplayed=false`)에서는 기존과 동일하게 동작합니다.
- `requireTccDisplayed=true` + TCC 리스트 미가용 환경에서는 등록이 차단되고, UI/알림으로 원인을 확인할 수 있습니다.
- 선행모드(런타임 요구사항) 증가는 없습니다.

## 기술 변경 상세
- 설정/직렬화:
  - `include/CodexOfPowerNG/Config.h`
  - `src/Config.cpp`
  - `SKSE/Plugins/CodexOfPowerNG/settings.json`
- 등록 게이트 로직:
  - `include/CodexOfPowerNG/Registration.h`
  - `include/CodexOfPowerNG/RegistrationTccGate.h` (신규)
  - `src/Registration.cpp`
- UI 상태/표시:
  - `src/PrismaUIManager.cpp`
  - `PrismaUI/views/codexofpowerng/index.html`
- 로컬라이제이션:
  - `SKSE/Plugins/CodexOfPowerNG/lang/en.json`
  - `SKSE/Plugins/CodexOfPowerNG/lang/ko.json`
- 테스트:
  - `tests/registration_tcc_gate.test.cpp` (신규)
  - `tests/lotd_gate_warning_ui.test.cjs` (신규)
- 스모크 체크리스트:
  - `docs/plans/2026-02-17-lotd-gate-smoke-checklist.md` (신규)

## 검증
- `./scripts/test.sh` 통과 (`JS 50/50`, `C++ host test` 통과)
- `cmake --build --preset wsl-release` 통과
- `cmake --install build/wsl-release` 통과
- `python3 scripts/vibe.py doctor --full` 통과

## 호환성/주의사항
- 기존 Codex of Power / SVCollection과 저장 호환되지 않습니다.
- 런타임 요구사항은 기존과 동일합니다:
  - SKSE64
  - Address Library for SKSE Plugins
  - Prisma UI
  - Media Keys Fix SKSE
- `requireTccDisplayed`를 켠 경우, TCC 리스트 미가용 시 등록은 의도적으로 차단됩니다.

## 패키지
- 태그: `v1.0.6-rc.5`
- 릴리즈: `https://github.com/servaltullius/CodexOfPowerNG/releases/tag/v1.0.6-rc.5`
- 에셋: `Codex.of.Power.NG.zip`
- 저장소 내 아카이브: `releases/Codex of Power NG.zip`
