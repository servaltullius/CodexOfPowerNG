# Codex of Power NG v1.0.6 (2026-02-17)

## 요약
v1.0.6은 LOTD/TCC 연동 등록 게이트를 안정적으로 도입하고, C++ 런타임 코드를 역할 단위로 모듈화해 유지보수성과 회귀 대응력을 높인 릴리즈입니다.  
사용자 기능은 기존 흐름을 유지하면서, 게이트 상태 가시성과 내부 검증 강도를 강화했습니다.

## 주요 변경점
- `registration.requireTccDisplayed` 설정 추가 및 LOTD/TCC 등록 게이트 fail-closed 적용
- TCC 리스트 미가용/미표시 상태를 UI에서 즉시 확인할 수 있도록 경고 표시 강화
- Rewards 탭에 캐릭터 이미지 기반 orbit 시각화 적용
- Prisma UI payload, Registration 내부, Serialization 경로를 책임별로 모듈 분리
- FormID 파싱/로컬화 경계값 테스트 및 save writer 실행 흐름 회귀 테스트 추가

## 사용자 영향
- 기본 설정(`requireTccDisplayed=false`)에서는 기존과 동일하게 동작합니다.
- `requireTccDisplayed=true`일 때 TCC 리스트가 없거나 표시 조건을 만족하지 않으면 등록이 차단됩니다.
- 선행모드/런타임 요구사항 증가는 없습니다.

## 기술 변경 상세
- 설정/게이트/UI 경고:
  - `include/CodexOfPowerNG/Config.h`
  - `src/Config.cpp`
  - `include/CodexOfPowerNG/RegistrationTccGate.h`
  - `src/Registration.cpp`
  - `src/PrismaUIManager.cpp`
  - `PrismaUI/views/codexofpowerng/index.html`
  - `SKSE/Plugins/CodexOfPowerNG/lang/en.json`
  - `SKSE/Plugins/CodexOfPowerNG/lang/ko.json`
- Rewards 시각화/UI:
  - `PrismaUI/views/codexofpowerng/reward_orbit.js`
  - `PrismaUI/views/codexofpowerng/assets/character.png`
  - `PrismaUI/views/codexofpowerng/index.html`
- Prisma UI C++ 모듈화:
  - `src/PrismaUIInternal.h`
  - `src/PrismaUIRequests.cpp`
  - `src/PrismaUIRequestOps.cpp`
  - `src/PrismaUISettings.cpp`
  - `src/PrismaUISettingsPayload.cpp`
  - `src/PrismaUIStatePayload.cpp`
  - `src/PrismaUITogglePolicy.cpp`
  - `src/PrismaUIToggleActions.cpp`
  - `src/PrismaUIViewState.cpp`
  - `src/PrismaUIViewWorkers.cpp`
  - `src/PrismaUIViewLifecycle.cpp`
  - `src/PrismaUIPayloadsInventory.cpp`
  - `src/PrismaUIPayloadsRewards.cpp`
- Registration/Rewards/Serialization 모듈화:
  - `src/RegistrationInternal.cpp`
  - `src/RegistrationInternalMaps.cpp`
  - `src/RegistrationInternalTcc.cpp`
  - `src/RegistrationQuickRegister.cpp`
  - `src/RewardsCore.cpp`
  - `src/RewardsRandomTables.cpp`
  - `src/Serialization.cpp`
  - `src/SerializationSave.cpp`
  - `src/SerializationLoad.cpp`
  - `include/CodexOfPowerNG/RegistrationFormId.h`
  - `include/CodexOfPowerNG/SerializationWriteFlow.h`
- 테스트:
  - `tests/registration_tcc_gate.test.cpp`
  - `tests/lotd_gate_warning_ui.test.cjs`
  - `tests/registration_formid_parse.test.cpp`
  - `tests/serialization_write_flow.test.cpp`

## 검증
- `cmake --build --preset wsl-release` 통과
- `./scripts/test.sh` 통과 (`JS 50/50`, `C++ host tests` 통과)
- `cmake --install build/wsl-release` 통과
- `python3 scripts/vibe.py doctor --full` 통과

## 호환성/주의사항
- Codex of Power / SVCollection과 저장 호환되지 않습니다.
- 런타임 요구사항은 기존과 동일합니다:
  - SKSE64
  - Address Library for SKSE Plugins
  - Prisma UI
  - Media Keys Fix SKSE
- `requireTccDisplayed=true` 사용 시, TCC 리스트 미가용 환경에서는 등록이 의도적으로 차단됩니다.

## 패키지
- 태그: `v1.0.6`
- 릴리즈: `https://github.com/servaltullius/CodexOfPowerNG/releases/tag/v1.0.6`
- 에셋: `Codex.of.Power.NG.zip`
- 저장소 내 아카이브: `releases/Codex of Power NG.zip`
