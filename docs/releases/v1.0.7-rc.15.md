# Codex of Power NG v1.0.7-rc.15 (2026-02-19, Pre-release)

## 요약
이번 프리릴리즈는 저장 로드/새 게임 경계에서 보상 동기화 작업이 섞이면서 소지무게/치명타/저항 반영이 어긋날 수 있던 타이밍 이슈를 근본적으로 완화한 패치입니다.  
동기화 작업에 세대(epoch) 취소 가드와 로드 준비 대기(timeout) 정책을 적용해, 로드 직후 수치 튐과 미반영 가능성을 줄였습니다.

## 주요 변경점
- `kNewGame` 경로에서도 동기화 스케줄러 리셋 수행
- watchdog 강제 재시작 시 세대(epoch) 갱신으로 기존 작업 무효화
- readiness 재시도 정책을 "횟수 기반"에서 "시간 기반(timeout)"으로 변경
- quick resync fallback 로그를 상태별로 정리해 원인 추적성 개선
- 직렬화 로드 콜백 끝의 조기 full sync 호출 제거 유지

## 사용자 영향
- 저장 로드/새 게임 직후 소지무게 보상 미반영, 치명타/저항 수치 튐 가능성이 줄어듭니다.
- "로드 후 기다려야 반영"되는 체감이 완화됩니다.
- 기존 UI/설정 사용 방식은 유지됩니다.

## 기술 변경 상세
- 로드 경계 리셋 API 및 스케줄러 세대 관리:
  - `include/CodexOfPowerNG/Rewards.h`
  - `src/Rewards.cpp`
- SKSE 메시지 처리(`kPreLoadGame`, `kNewGame`) 보강:
  - `src/main.cpp`
- 직렬화 로드 경로의 조기 동기화 제거:
  - `src/SerializationLoad.cpp`
- 정책 테스트 보강:
  - `tests/reward_caps_policy.test.cjs`

## 검증
- `python3 scripts/vibe.py doctor --full` 통과
- `node --test tests/reward_caps_policy.test.cjs` 통과
- `scripts/test.sh` 통과 (`JS 62/62`, `C++ host tests` 통과)
- `export VCPKG_ROOT="/mnt/c/Users/kdw73/vcpkg" && cmake --build --preset wsl-release` 통과
- `cmake --install build/wsl-release` 통과
- `cd dist/CodexOfPowerNG && zip -r -FS "../../releases/Codex of Power NG.zip" .` 통과

## 호환성/주의사항
- Codex of Power / SVCollection과 저장 호환되지 않습니다.
- 런타임 요구사항은 기존과 동일합니다:
  - SKSE64
  - Address Library for SKSE Plugins
  - Prisma UI
  - Media Keys Fix SKSE

## 패키지
- 태그: `v1.0.7-rc.15`
- 릴리즈: `https://github.com/servaltullius/CodexOfPowerNG/releases/tag/v1.0.7-rc.15`
- 에셋: `Codex of Power NG.zip`
- 저장소 내 아카이브: `releases/Codex of Power NG.zip`
