# Codex of Power NG v1.0.7-rc.7 (2026-02-18, Pre-release)

## 요약
이번 프리릴리즈는 보상 동기화의 누락/정체 케이스를 줄여 치명타/저항 캡 표시 이상과 CarryWeight 미반영 문제를 완화하는 안정화 업데이트입니다.
저장 로드 시 보상 총합을 즉시 캡 기준으로 정규화하고, CarryWeight는 current 기반 결손 보정으로 실제 반영을 우선하도록 조정했습니다.

## 주요 변경점
- 저장 로드(`kRecordRewards`) 시 reward total을 즉시 캡 클램프
- CarryWeight 동기화 delta를 `current-base` 기반으로 계산
- CarryWeight quick resync 워커에 stale watchdog(3초) 추가
- 회귀 테스트 보강(JS/C++)

## 사용자 영향
- 이전 버전에서 누적된 초과 보상값(예: 치명타/전기저항)이 로드 시 즉시 캡 정책 범위로 정리됩니다.
- CarryWeight +5 보상 획득 시 실제 소지무게 반영 누락 케이스가 줄어듭니다.
- 기존 보상/등록 기능 플로우와 설정 포맷은 유지됩니다.

## 기술 변경 상세
- 보상 동기화 헬퍼:
  - `include/CodexOfPowerNG/RewardsResync.h`
- 보상 동기화/quick resync:
  - `src/Rewards.cpp`
- 저장 로드 시 보상 클램프:
  - `src/SerializationLoad.cpp`
- 테스트:
  - `tests/reward_caps_policy.test.cjs`
  - `tests/rewards_resync.test.cpp`

## 검증
- `scripts/test.sh` 통과 (`JS 58/58`, `C++ host tests` 통과)
- `cmake --build --preset wsl-release` 통과
- `cmake --install build/wsl-release` 통과
- `cd dist/CodexOfPowerNG && zip -r -FS "../../releases/Codex of Power NG.zip" .` 통과

## 호환성/주의사항
- Codex of Power / SVCollection과 저장 호환되지 않습니다.
- 런타임 요구사항은 기존과 동일합니다:
  - SKSE64
  - Address Library for SKSE Plugins
  - Prisma UI
  - Media Keys Fix SKSE
- 저항 계열 기본 캡(85%) 관련 참고:
  - https://en.m.uesp.net/wiki/Skyrim:Resist_Magic
  - https://en.m.uesp.net/wiki/Skyrim:Resist_Shock

## 패키지
- 태그: `v1.0.7-rc.7`
- 릴리즈: `https://github.com/servaltullius/CodexOfPowerNG/releases/tag/v1.0.7-rc.7`
- 에셋: `Codex of Power NG.zip`
- 저장소 내 아카이브: `releases/Codex of Power NG.zip`
